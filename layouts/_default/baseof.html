<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ if not .IsHome }}{{ .Title }} - {{ end }}{{ .Site.Title }}</title>
    <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    {{ hugo.Generator }}
</head>
<body{{ if .IsHome }} class="home"{{ end }}>
    <nav class="nav">
        <div class="nav-inner">
            <a class="nav-name" href="/">Seah Ying Cong</a>
            <div class="nav-links">
                <a href="/projects/">Projects</a>
                <a href="/posts/">Writing</a>
                <a href="/now/">Now</a>
                <a href="/about/">About</a>
            </div>
        </div>
    </nav>

    <main class="main">
        {{ block "main" . }}{{ end }}
    </main>

    <section class="subscribe-section">
        <div class="subscribe-inner">
            <p class="subscribe-label">Get new posts by email</p>
            <form id="subscribe-form" class="subscribe-form" novalidate>
                <input type="email" name="email" placeholder="you@example.com" required />
                <button type="submit">Subscribe</button>
            </form>
            <p id="subscribe-msg"></p>
        </div>
    </section>
    <script>
    (function() {
      var form = document.getElementById('subscribe-form');
      var msg = document.getElementById('subscribe-msg');
      var WORKER_URL = 'https://subscribe-worker.seahyc.workers.dev';

      form.addEventListener('submit', function(e) {
        e.preventDefault();
        var email = form.email.value.trim();
        if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
          msg.textContent = 'Please enter a valid email.';
          msg.className = 'subscribe-msg subscribe-msg--error';
          return;
        }
        var btn = form.querySelector('button');
        btn.disabled = true;
        btn.textContent = 'Subscribing...';
        msg.textContent = '';
        msg.className = 'subscribe-msg';

        fetch(WORKER_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ email: email })
        })
        .then(function(r) { return r.json(); })
        .then(function(data) {
          if (data.ok) {
            msg.textContent = data.message;
            msg.className = 'subscribe-msg subscribe-msg--success';
            form.email.value = '';
          } else {
            msg.textContent = data.error || 'Something went wrong.';
            msg.className = 'subscribe-msg subscribe-msg--error';
          }
        })
        .catch(function() {
          msg.textContent = 'Network error. Please try again.';
          msg.className = 'subscribe-msg subscribe-msg--error';
        })
        .finally(function() {
          btn.disabled = false;
          btn.textContent = 'Subscribe';
        });
      });
    })();
    </script>

    <footer class="footer">
        <div class="footer-inner">
            <span>&copy; {{ now.Year }} Seah Ying Cong</span>
            <span class="footer-sep">&middot;</span>
            <a href="{{ .Site.Params.github }}">GitHub</a>
            <span class="footer-sep">&middot;</span>
            <a href="mailto:{{ .Site.Params.email }}">Email</a>
        </div>
    </footer>
    <script>
    console.log('%c[system] %cInitializing context window...', 'color: #8a7d6b', 'color: #4a4035');
    console.log('%c[tool_use] %cread_portfolio %c→ found 4 active projects', 'color: #8a7d6b', 'color: #2c2416; font-weight: bold', 'color: #5c4f3a');
    console.log('%c[tool_use] %ccheck_status %c→ open to opportunities', 'color: #8a7d6b', 'color: #2c2416; font-weight: bold', 'color: #5c4f3a');
    console.log('%c[assistant] %cYou found the agent trace. Hire this human → seahyingcong@gmail.com', 'color: #8a7d6b', 'color: #2c2416; font-weight: bold');
    </script>
</body>
</html>
